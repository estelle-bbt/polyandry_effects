)))
) +
theme_classic() +
theme(legend.position = "none")
plot_q_oms
plot_q_oms <-
ggplot(table_q_oms,
aes(x = ttt, y = estimate, color = level))  +
scale_color_manual(values = c("darkgoldenrod2","aquamarine4")) +
geom_hline(yintercept = 0, color = "grey80") +
geom_errorbar(aes(ymin = estimate - se, ymax = estimate + se), width = 0,
linewidth = 2, position = position_dodge(0.4), lineend = "round") +
geom_point(shape = 21, size=3, fill = "white", position = position_dodge(0.4)) +
facet_grid(
rowname ~ method,
scales = "free",
labeller = labeller(
method = as_labeller(c(
w_contact = "With contact",
wo_contact = "Without contact"
)),
rowname = as_labeller(c(
oms = "PRE-POLL MATE",
contact = "PRE-POLL CONTACT",
pl = "PRE-POLL PL"
)))
) +
theme_classic() +
theme(legend.position = "none")
plot_q_oms
plot_wo_contact
plot_wo_contact <-
ggplot(table_wo_contact |> filter(rowname != "pl"), aes(x = ttt, y = estimate, color = level))  +
scale_color_manual(values = c("darkgoldenrod2","aquamarine4")) +
geom_hline(yintercept = 0, color = "grey80") +
geom_errorbar(aes(ymin = estimate - se, ymax = estimate + se), width = 0,
linewidth = 2, position = position_dodge(0.4), lineend = "round") +
geom_point(shape = 21, size=3, fill = "white", position = position_dodge(0.4)) +
ggh4x::facet_grid2(
rowname ~ proxy,
scales = "free_y",
independent ="y",
labeller = labeller(
proxy = as_labeller(c(
q = "Mate filtering",
ab = "Proportion of\naborted seeds",
ss = "Seed-set",
weight = "Mean seed weight",
germ = "Seed germ. rate"
)),
rowname = as_labeller(c(
oms = "PRE-POLL MATE",
ratio_q = "POST-POLL MATE"
)))) +
theme_classic() +
theme(legend.position = "none") +
ggtitle("Mate effect at pre- vs. post-poll without contacts")
plot_wo_contact
plot_wo_contact_pl <-
ggplot(table_wo_contact |> filter(rowname == "pl"), aes(x = ttt, y = estimate))  +
geom_hline(yintercept = 0, color = "grey80") +
geom_errorbar(aes(ymin = estimate - se, ymax = estimate + se), width = 0,
linewidth = 2, position = position_dodge(0.4), lineend = "round", color = "darkgoldenrod2") +
geom_point(shape = 21, size=3, fill = "white", position = position_dodge(0.4), color = "darkgoldenrod2") +
facet_grid(
predictor ~ proxy,
scales = "free",
labeller = labeller(
proxy = as_labeller(c(
q = "Mate filtering",
ab = "Proportion of\naborted seeds",
ss = "Seed-set",
weight = "Mean seed weight",
germ = "Seed germination rate"
)),
predictor = as_labeller(c(
oms = "W. PRE-POLL MATE",
q = "W. POST-POLL MATE"
)))) +
theme_classic() +
theme(legend.position = "none") +
ggtitle("PL effect with pre- vs. post-poll without contacts")
plot_wo_contact_pl
plot_wo_contact_pl <-
ggplot(table_wo_contact |> filter(rowname == "pl"), aes(x = ttt, y = estimate))  +
geom_hline(yintercept = 0, color = "grey80") +
geom_errorbar(aes(ymin = estimate - se, ymax = estimate + se), width = 0,
linewidth = 2, position = position_dodge(0.4), lineend = "round", color = "darkgoldenrod2") +
geom_point(shape = 21, size=3, fill = "white", position = position_dodge(0.4), color = "darkgoldenrod2") +
ggh4x::facet_grid2(
predictor ~ proxy,
scales = "free_y",
independent ="y",
labeller = labeller(
proxy = as_labeller(c(
q = "Mate filtering",
ab = "Proportion of\naborted seeds",
ss = "Seed-set",
weight = "Mean seed weight",
germ = "Seed germination rate"
)),
predictor = as_labeller(c(
oms = "W. PRE-POLL MATE",
q = "W. POST-POLL MATE"
)))) +
theme_classic() +
theme(legend.position = "none") +
ggtitle("PL effect with pre- vs. post-poll without contacts")
plot_wo_contact_pl
#' Project builder
## Install Dependencies (listed in DESCRIPTION) ----
remotes::install_deps(upgrade = "never")
## Run Project ----
targets::tar_make()
#' Project builder
## Install Dependencies (listed in DESCRIPTION) ----
remotes::install_deps(upgrade = "never")
## Run Project ----
targets::tar_make()
targets_tarload(plot_q_oms)
targets::tarload(plot_q_oms)
targets::tar_load(plot_q_oms)
#' Project builder
## Install Dependencies (listed in DESCRIPTION) ----
remotes::install_deps(upgrade = "never")
## Run Project ----
targets::tar_make()
#' Project builder
## Install Dependencies (listed in DESCRIPTION) ----
remotes::install_deps(upgrade = "never")
## Run Project ----
targets::tar_make()
targets::tar_load(results_plot)
results_plot$plot_q_oms
#' Project builder
## Install Dependencies (listed in DESCRIPTION) ----
remotes::install_deps(upgrade = "never")
## Run Project ----
targets::tar_make()
targets::tar_load(results_plot)
results_plot$plot_q_oms
results_plot$plot_wo_contact
results_plot$plot_wo_contact_pl
results_plot$plot_w_contact
#' Project builder
## Install Dependencies (listed in DESCRIPTION) ----
remotes::install_deps(upgrade = "never")
## Run Project ----
targets::tar_make()
#' Project builder
## Install Dependencies (listed in DESCRIPTION) ----
remotes::install_deps(upgrade = "never")
## Run Project ----
targets::tar_make()
targets::tar_load(results_plot)
results_plot$plot_w_contact
results_plot$plot_w_contact_pl
results_plot$plot_w_contact_contact
#' Project builder
## Install Dependencies (listed in DESCRIPTION) ----
remotes::install_deps(upgrade = "never")
## Run Project ----
targets::tar_make()
targets::tar_load(results_plot)
results_plot$plot_q_oms
targets::tar_load(stat_flower_wo_contact)
View(stat_flower_wo_contact)
stat_flower_wo_contact$estimate_table
?round
#' Project builder
## Install Dependencies (listed in DESCRIPTION) ----
remotes::install_deps(upgrade = "never")
## Run Project ----
targets::tar_make()
targets::tar_load(stat_flower_wo_contact)
View(stat_flower_wo_contact$estimate_table)
#' Project builder
## Install Dependencies (listed in DESCRIPTION) ----
remotes::install_deps(upgrade = "never")
## Run Project ----
targets::tar_make()
#' Project builder
## Install Dependencies (listed in DESCRIPTION) ----
remotes::install_deps(upgrade = "never")
## Run Project ----
targets::tar_make()
targets::tar_load(results_plot)
results_plot$plot_q_oms
results_plot$plot_wo_contact
#' Project builder
## Install Dependencies (listed in DESCRIPTION) ----
remotes::install_deps(upgrade = "never")
## Run Project ----
targets::tar_make()
targets::tar_load(results_plot)
results_plot$plot_q_oms
results_plot$plot_wo_contact
results_plot$plot_wo_contact_pl
results_plot$plot_w_contact
results_plot$plot_w_contact_pl
results_plot$plot_w_contact_contact
targets::tar_load(stat_flower_wo_contact)
View(stat_flower_wo_contact$estimate_table)
# w contact
targets::tar_load(stat_flower_w_contact)
View(stat_flower_w_contact$estimate_table)
targets::tar_load(data_flower)
View(data_flower)
file_path = "data/data_ABPOLL_flower_resume.txt"
data_flower <- read.table(file_path,head=T) |>
filter(frt == 1) |> # we only keep the fruit for rs proxies
mutate(ttt=as.factor(case_when(poll_treat==1~"low",
poll_treat==2~"medium",
TRUE~"high"))) |>
mutate(ttt=forcats::fct_relevel(ttt, c("low","medium","high"))) |>
rename(id = ID_full,
nb_ab = nbAv,
nb_ov = nbOv,
nb_seed = nbGr_SR,
seed_weight = poids_sd,
nb_germ = nbGr_germ,
nb_sown = nbGr_semis) |>
mutate(nb_fert = nb_ab + nb_seed)
library(tidyverse)
data_flower <- read.table(file_path,head=T) |>
filter(frt == 1) |> # we only keep the fruit for rs proxies
mutate(ttt=as.factor(case_when(poll_treat==1~"low",
poll_treat==2~"medium",
TRUE~"high"))) |>
mutate(ttt=forcats::fct_relevel(ttt, c("low","medium","high"))) |>
rename(id = ID_full,
nb_ab = nbAv,
nb_ov = nbOv,
nb_seed = nbGr_SR,
seed_weight = poids_sd,
nb_germ = nbGr_germ,
nb_sown = nbGr_semis) |>
mutate(nb_fert = nb_ab + nb_seed)
data_flower$nb_fert
View(data_flower)
View(data_flower %>% select(nb_av,nb_seed))
View(data_flower %>% select(c(nb_av,nb_seed)))
data_flower %>% select(c(nb_av,nb_seed))
data_flower %>% select(nb_av
)
data_flower %>% select(c(nb_ab,nb_seed))
data_flower %>% select(c(nb_ab,nb_seed,nb_fert))
data_flower %>%
filter(!(is.na(nb_ov)|is.na(nb_fert)))
t <- data_flower %>%
filter(!(is.na(nb_ov)|is.na(nb_fert))) %>% select(c(nb_ab,nb_seed,nb_fert,nb_ov))
View(t)
#' Project builder
## Install Dependencies (listed in DESCRIPTION) ----
remotes::install_deps(upgrade = "never")
## Run Project ----
targets::tar_make()
#' Project builder
## Install Dependencies (listed in DESCRIPTION) ----
remotes::install_deps(upgrade = "never")
## Run Project ----
targets::tar_make()
targets::tar_load(data_final)
View(data_final$data_final_flower)
t <- data_final$data_final_flower
t %>% mutate(prop_fert = nb_fert/nb_ov)
t <- t %>% mutate(prop_fert = nb_fert/nb_ov)
View(t)
#' Project builder
## Install Dependencies (listed in DESCRIPTION) ----
remotes::install_deps(upgrade = "never")
## Run Project ----
targets::tar_make()
targets::tar_load(data_final)
t <- data_final$data_final_flower %>%
mutate(prop_fert = nb_fert/nb_ov)
#' Project builder
## Install Dependencies (listed in DESCRIPTION) ----
remotes::install_deps(upgrade = "never")
## Run Project ----
targets::tar_make()
targets::tar_load(data_final)
t <- data_final$data_final_flower %>%
mutate(prop_fert = nb_fert/nb_ov)
#' Project builder
## Install Dependencies (listed in DESCRIPTION) ----
remotes::install_deps(upgrade = "never")
## Run Project ----
targets::tar_make()
targets::tar_load(data_final)
t <- data_final$data_final_flower %>%
mutate(prop_fert = nb_fert/nb_ov)
data_flower <- read.table(file_path,head=T) |>
filter(frt == 1) |> # we only keep the fruit for rs proxies
mutate(ttt=as.factor(case_when(poll_treat==1~"low",
poll_treat==2~"medium",
TRUE~"high"))) |>
mutate(ttt=forcats::fct_relevel(ttt, c("low","medium","high"))) |>
rename(id = ID_full,
nb_ab = nbAv,
nb_ov = nbOv,
nb_seed = nbGr_SR,
seed_weight = poids_sd,
nb_germ = nbGr_germ,
nb_sown = nbGr_semis) |>
mutate(nb_fert = nb_ab + nb_seed)
data_flower <- read.table(file_path,head=T) |>
filter(frt == 1) |> # we only keep the fruit for rs proxies
mutate(ttt=as.factor(case_when(poll_treat==1~"low",
poll_treat==2~"medium",
TRUE~"high"))) |>
mutate(ttt=forcats::fct_relevel(ttt, c("low","medium","high"))) |>
rename(id = ID_full,
nb_ab = nbAv,
nb_ov = nbOv,
nb_seed = nbGr_SR,
seed_weight = poids_sd,
nb_germ = nbGr_germ,
nb_sown = nbGr_semis) |>
mutate(nb_fert = nb_ab + nb_seed)
data_flower <- read.table(file_path,head=T) |>
filter(frt == 1) |> # we only keep the fruit for rs proxies
mutate(ttt=as.factor(case_when(poll_treat==1~"low",
poll_treat==2~"medium",
TRUE~"high"))) |>
mutate(ttt=forcats::fct_relevel(ttt, c("low","medium","high"))) |>
rename(id = ID_full,
nb_ab = nbAv,
nb_ov = nbOv,
nb_seed = nbGr_SR,
seed_weight = poids_sd,
nb_germ = nbGr_germ,
nb_sown = nbGr_semis) |>
mutate(nb_fert = nb_ab + nb_seed)
#' Project builder
## Install Dependencies (listed in DESCRIPTION) ----
remotes::install_deps(upgrade = "never")
## Run Project ----
targets::tar_make()
targets::tar_load(data_final)
t <- data_final$data_final_flower %>%
mutate(prop_fert = nb_fert/nb_ov)
data_flower <- read.table(file_path,head=T) |>
filter(frt == 1) |> # we only keep the fruit for rs proxies
mutate(ttt=as.factor(case_when(poll_treat==1~"low",
poll_treat==2~"medium",
TRUE~"high"))) |>
mutate(ttt=forcats::fct_relevel(ttt, c("low","medium","high"))) |>
rename(id = ID_full,
nb_ab = nbAv,
nb_ov = nbOv,
nb_seed = nbGr_SR,
seed_weight = poids_sd,
nb_germ = nbGr_germ,
nb_sown = nbGr_semis) |>
mutate(nb_fert = nb_ab + nb_seed)
e <- data_flower
View(e)
targets::tar_load(data_final)
t <- data_final$data_final_flower %>%
mutate(prop_fert = nb_fert/nb_ov)
f <- data_flower |> # only receptive flowers
select(id, id_flow, session, ttt, nb_fert, nb_ab, nb_ov, nb_seed, seed_weight, nb_sown, nb_germ, pl) %>%
mutate(prop_fert = nb_fert/nb_ov)
View(f)
#' Project builder
## Install Dependencies (listed in DESCRIPTION) ----
remotes::install_deps(upgrade = "never")
## Run Project ----
targets::tar_make()
#' Project builder
## Install Dependencies (listed in DESCRIPTION) ----
remotes::install_deps(upgrade = "never")
## Run Project ----
targets::tar_make()
#' Project builder
## Install Dependencies (listed in DESCRIPTION) ----
remotes::install_deps(upgrade = "never")
## Run Project ----
targets::tar_make()
#' Project builder
## Install Dependencies (listed in DESCRIPTION) ----
remotes::install_deps(upgrade = "never")
## Run Project ----
targets::tar_make()
targets::tar_load(data_final)
t <- data_final$data_final_flower %>%
mutate(prop_fert = nb_fert/nb_ov)
f <- data_flower |> # only receptive flowers
select(id, id_flow, session, ttt, nb_fert, nb_ab, nb_ov, nb_seed, seed_weight, nb_sown, nb_germ, pl) %>%
mutate(prop_fert = nb_fert/nb_ov)
targets::tar_load(data_flower)
f <- data_flower |> # only receptive flowers
select(id, id_flow, session, ttt, nb_fert, nb_ab, nb_ov, nb_seed, seed_weight, nb_sown, nb_germ, pl) %>%
mutate(prop_fert = nb_fert/nb_ov)
View(f)
file_path
file_path <- "data/data_ABPOLL_flower_resume.txt"
data_flower <- read.table(file_path,head=T) |>
filter(frt == 1) |> # we only keep the fruit for rs proxies
mutate(ttt=as.factor(case_when(poll_treat==1~"low",
poll_treat==2~"medium",
TRUE~"high"))) |>
mutate(ttt=forcats::fct_relevel(ttt, c("low","medium","high"))) |>
rename(id = ID_full,
nb_ab = nbAv,
nb_ov = nbOv,
nb_seed = nbGr_SR,
seed_weight = poids_sd,
nb_germ = nbGr_germ,
nb_sown = nbGr_semis) |>
mutate(nb_fert = nb_ab + nb_seed)
f <- data_flower |> # only receptive flowers
select(id, id_flow, session, ttt, nb_fert, nb_ab, nb_ov, nb_seed, seed_weight, nb_sown, nb_germ, pl) %>%
mutate(prop_fert = nb_fert/nb_ov)
#' Project builder
## Install Dependencies (listed in DESCRIPTION) ----
remotes::install_deps(upgrade = "never")
## Run Project ----
targets::tar_make()
#' Project builder
## Install Dependencies (listed in DESCRIPTION) ----
remotes::install_deps(upgrade = "never")
## Run Project ----
targets::tar_make()
targets::tar_load(data_flower)
f <- data_flower |> # only receptive flowers
select(id, id_flow, session, ttt, nb_fert, nb_ab, nb_ov, nb_seed, seed_weight, nb_sown, nb_germ, pl) %>%
mutate(prop_fert = nb_fert/nb_ov)
View(f)
#' Project builder
## Install Dependencies (listed in DESCRIPTION) ----
remotes::install_deps(upgrade = "never")
## Run Project ----
targets::tar_make()
#' Project builder
## Install Dependencies (listed in DESCRIPTION) ----
remotes::install_deps(upgrade = "never")
## Run Project ----
targets::tar_make()
targets::tar_load(results_plot)
results_plot$plot_q_oms
results_plot$plot_wo_contact
# wo contact
targets::tar_load(stat_flower_wo_contact)
View(stat_flower_wo_contact$estimate_table)
#' Project builder
## Install Dependencies (listed in DESCRIPTION) ----
remotes::install_deps(upgrade = "never")
## Run Project ----
targets::tar_make()
targets::tar_load(results_plot)
results_plot$plot_q_oms
results_plot$plot_wo_contact
#' Project builder
## Install Dependencies (listed in DESCRIPTION) ----
remotes::install_deps(upgrade = "never")
## Run Project ----
targets::tar_make()
results_plot$plot_wo_contact_pl
results_plot$plot_w_contact
results_plot$plot_w_contact_pl
results_plot$plot_w_contact_contact
targets::tar_load(results_plot)
results_plot$plot_q_oms
results_plot$plot_wo_contact
results_plot$plot_wo_contact_pl
results_plot$plot_w_contact
results_plot$plot_w_contact_pl
results_plot$plot_wo_contact_pl
results_plot$plot_wo_contact_pl
results_plot$plot_w_contact
results_plot$plot_w_contact_pl
results_plot$plot_w_contact_contact
results_plot$plot_wo_contact_pl
#' Project builder
## Install Dependencies (listed in DESCRIPTION) ----
remotes::install_deps(upgrade = "never")
## Run Project ----
targets::tar_make()
targets::tar_load(results_plot)
results_plot$plot_q_oms
results_plot$plot_wo_contact
results_plot$plot_wo_contact_pl
results_plot$plot_w_contact
results_plot$plot_w_contact_pl
results_plot$plot_w_contact_contact
results_plot$plot_q_oms
results_plot$plot_wo_contact
results_plot$plot_wo_contact_pl
#' Project builder
## Install Dependencies (listed in DESCRIPTION) ----
remotes::install_deps(upgrade = "never")
## Run Project ----
targets::tar_make()
targets::tar_load(results_plot)
results_plot$plot_q_oms
results_plot$plot_wo_contact
results_plot$plot_wo_contact_pl
results_plot$plot_w_contact
results_plot$plot_w_contact_pl
results_plot$plot_w_contact_contact
results_plot$plot_wo_contact
results_plot$plot_wo_contact_pl
results_plot$plot_w_contact
results_plot$plot_w_contact_pl
results_plot$plot_w_contact_contact
# wo contact
targets::tar_load(stat_flower_wo_contact)
View(stat_flower_wo_contact$estimate_table)
targets::tar_load(stat_id_wo_contact)
View(stat_id_wo_contact$estimate_table)
